{"version":3,"file":"svelte-drag-drop-touch.esm.js","sources":["../dragdroptouch-bug-fixed/DragDropTouch.esm.js","svelte-drag-drop-touch.ts"],"sourcesContent":["var DragDropTouch;\n(function (DragDropTouchExport) {\n    var DataTransfer = (function () {\n        function DataTransfer() {\n            this._dropEffect = 'move';\n            this._effectAllowed = 'all';\n            this._data = {};\n        }\n        Object.defineProperty(DataTransfer.prototype, \"dropEffect\", {\n            enumerable: true, configurable: true,\n            get: function () { return this._dropEffect; },\n            set: function (value) { this._dropEffect = value; },\n        });\n        Object.defineProperty(DataTransfer.prototype, \"effectAllowed\", {\n            enumerable: true, configurable: true,\n            get: function () { return this._effectAllowed; },\n            set: function (value) { this._effectAllowed = value; },\n        });\n        Object.defineProperty(DataTransfer.prototype, \"types\", {\n            enumerable: true, configurable: true,\n            get: function () { return Object.keys(this._data); },\n        });\n        DataTransfer.prototype.clearData = function (type) {\n            if (type == null) {\n                this._data = {};\n            }\n            else {\n                delete this._data[type.toLowerCase()];\n            }\n        };\n        DataTransfer.prototype.getData = function (type) {\n            return this._data[type.toLowerCase()] || '';\n        };\n        DataTransfer.prototype.setData = function (type, value) {\n            this._data[type.toLowerCase()] = value;\n        };\n        DataTransfer.prototype.setDragImage = function (img, offsetX, offsetY) {\n            var ddt = DragDropTouch._instance;\n            ddt._imgCustom = img;\n            ddt._imgOffset = { x: offsetX, y: offsetY };\n        };\n        return DataTransfer;\n    }());\n    DragDropTouchExport.DataTransfer = DataTransfer;\n    var DragDropTouchSingleton = (function () {\n        function DragDropTouch() {\n            this._lastClick = 0;\n            if ((DragDropTouchSingleton != null) &&\n                (DragDropTouchSingleton._instance != null)) {\n                throw new Error('DragDropTouch instance already created.');\n            }\n            // https://github.com/Modernizr/Modernizr/issues/1894\n            var supportsPassive = false;\n            document.addEventListener('test', function () { }, {\n                get passive() { supportsPassive = true; return true; }\n            });\n            if (navigator.maxTouchPoints > 0) {\n                var touchstart = this._touchstart.bind(this);\n                var touchmove = this._touchmove.bind(this);\n                var touchend = this._touchend.bind(this);\n                var Options = (supportsPassive ? { passive: false, capture: false } : false);\n                document.addEventListener('touchstart', touchstart, Options);\n                document.addEventListener('touchmove', touchmove, Options);\n                document.addEventListener('touchend', touchend);\n                document.addEventListener('touchcancel', touchend);\n            }\n        }\n        DragDropTouch.getInstance = function () {\n            return DragDropTouchSingleton._instance;\n        };\n        /**** Event Handlers ****/\n        DragDropTouch.prototype._touchstart = function (e) {\n            var _this = this;\n            if (this._shouldHandle(e)) {\n                if (Date.now() - this._lastClick < DragDropTouchSingleton._DBLCLICK) {\n                    if (this._dispatchEvent(e, 'dblclick', e.target)) {\n                        e.preventDefault();\n                        this._reset();\n                        return;\n                    }\n                }\n                this._reset();\n                var src_1 = this._closestDraggable(e.target);\n                if (src_1 != null) {\n                    if (!this._dispatchEvent(e, 'mousemove', e.target) &&\n                        !this._dispatchEvent(e, 'mousedown', e.target)) {\n                        this._dragSource = src_1;\n                        this._ptDown = this._getPoint(e);\n                        this._lastTouch = e;\n                        e.preventDefault();\n                        setTimeout(function () {\n                            if ((_this._dragSource === src_1) && (_this._img == null)) {\n                                if (_this._dispatchEvent(e, 'contextmenu', src_1)) {\n                                    _this._reset();\n                                }\n                            }\n                        }, DragDropTouchSingleton._CTXMENU);\n                        if (DragDropTouchSingleton._ISPRESSHOLDMODE) {\n                            this._pressHoldInterval = setTimeout(function () {\n                                _this._isDragEnabled = true;\n                                _this._touchmove(e);\n                            }, DragDropTouchSingleton._PRESSHOLDAWAIT);\n                        }\n                    }\n                }\n            }\n        };\n        DragDropTouch.prototype._touchmove = function (e) {\n            if (this._shouldCancelPressHoldMove(e)) {\n                this._reset();\n                return;\n            }\n            if (this._shouldHandleMove(e) || this._shouldHandlePressHoldMove(e)) {\n                var target = this._getTarget(e);\n                if (this._dispatchEvent(e, 'mousemove', target)) {\n                    this._lastTouch = e;\n                    e.preventDefault();\n                    return;\n                }\n                if (this._dragSource && (this._img == null) && this._shouldStartDragging(e)) {\n                    this._dispatchEvent(e, 'dragstart', this._dragSource);\n                    this._createImage(e);\n                    this._dispatchEvent(e, 'dragenter', target);\n                }\n                if (this._img != null) {\n                    this._lastTouch = e;\n                    e.preventDefault();\n                    this._dispatchEvent(e, 'drag', this._dragSource);\n                    if (target != this._lastTarget) {\n                        this._dispatchEvent(this._lastTouch, 'dragleave', this._lastTarget);\n                        this._dispatchEvent(e, 'dragenter', target);\n                        this._lastTarget = target;\n                    }\n                    this._moveImage(e);\n                    this._isDropZone = this._dispatchEvent(e, 'dragover', target);\n                }\n            }\n        };\n        DragDropTouch.prototype._touchend = function (e) {\n            if (this._shouldHandle(e)) {\n                if (this._dispatchEvent(this._lastTouch, 'mouseup', e.target)) {\n                    e.preventDefault();\n                    return;\n                }\n                if (this._img == null) {\n                    this._dragSource = null;\n                    this._dispatchEvent(this._lastTouch, 'click', e.target);\n                    this._lastClick = Date.now();\n                }\n                this._destroyImage();\n                if (this._dragSource) {\n                    if (e.type.indexOf('cancel') < 0 && this._isDropZone) {\n                        this._dispatchEvent(this._lastTouch, 'drop', this._lastTarget);\n                    }\n                    this._dispatchEvent(this._lastTouch, 'dragend', this._dragSource);\n                    this._reset();\n                }\n            }\n        };\n        /**** Utility Functions ****/\n        DragDropTouch.prototype._shouldHandle = function (e) {\n            return ((e != null) && !e.defaultPrevented &&\n                (e.touches != null) && (e.touches.length < 2));\n        };\n        DragDropTouch.prototype._shouldHandleMove = function (e) {\n            return !DragDropTouchSingleton._ISPRESSHOLDMODE && this._shouldHandle(e);\n        };\n        DragDropTouch.prototype._shouldHandlePressHoldMove = function (e) {\n            return (DragDropTouchSingleton._ISPRESSHOLDMODE && this._isDragEnabled &&\n                (e != null) && (e.touches != null) && (e.touches.length > 0));\n        };\n        DragDropTouch.prototype._shouldCancelPressHoldMove = function (e) {\n            return (DragDropTouchSingleton._ISPRESSHOLDMODE && !this._isDragEnabled &&\n                (this._getDelta(e) > DragDropTouchSingleton._PRESSHOLDMARGIN));\n        };\n        DragDropTouch.prototype._shouldStartDragging = function (e) {\n            var delta = this._getDelta(e);\n            return ((delta > DragDropTouchSingleton._THRESHOLD) ||\n                DragDropTouchSingleton._ISPRESSHOLDMODE && (delta >= DragDropTouchSingleton._PRESSHOLDTHRESHOLD));\n        };\n        DragDropTouch.prototype._reset = function () {\n            this._destroyImage();\n            this._dragSource = null;\n            this._lastTouch = null;\n            this._lastTarget = null;\n            this._ptDown = null;\n            this._isDragEnabled = false;\n            this._isDropZone = false;\n            this._dataTransfer = new DataTransfer();\n            clearInterval(this._pressHoldInterval);\n        };\n        DragDropTouch.prototype._getPoint = function (e, page) {\n            if ((e != null) && (e.touches != null)) {\n                var Touch_1 = e.touches[0];\n                return { x: page ? Touch_1.pageX : Touch_1.clientX, y: page ? Touch_1.pageY : Touch_1.clientY };\n            }\n            else {\n                var Event_1 = e;\n                return { x: page ? Event_1.pageX : Event_1.clientX, y: page ? Event_1.pageY : Event_1.clientY };\n            }\n        };\n        DragDropTouch.prototype._getDelta = function (e) {\n            if (DragDropTouchSingleton._ISPRESSHOLDMODE && !this._ptDown) {\n                return 0;\n            }\n            var p = this._getPoint(e);\n            return Math.abs(p.x - this._ptDown.x) + Math.abs(p.y - this._ptDown.y);\n        };\n        DragDropTouch.prototype._getTarget = function (e) {\n            var pt = this._getPoint(e);\n            var el = document.elementFromPoint(pt.x, pt.y);\n            while ((el != null) && (getComputedStyle(el).pointerEvents == 'none')) {\n                el = el.parentElement;\n            }\n            return el;\n        };\n        DragDropTouch.prototype._createImage = function (e) {\n            if (this._img != null) {\n                this._destroyImage();\n            }\n            var src = this._imgCustom || this._dragSource;\n            this._img = src.cloneNode(true);\n            this._copyStyle(src, this._img);\n            this._img.style.top = this._img.style.left = '-9999px';\n            if (this._imgCustom == null) {\n                var rc = src.getBoundingClientRect();\n                var pt = this._getPoint(e);\n                this._imgOffset = { x: pt.x - rc.left, y: pt.y - rc.top };\n                this._img.style.opacity = DragDropTouchSingleton._OPACITY.toString();\n            }\n            this._moveImage(e);\n            document.body.appendChild(this._img);\n        };\n        DragDropTouch.prototype._destroyImage = function () {\n            if ((this._img != null) && (this._img.parentElement != null)) {\n                this._img.parentElement.removeChild(this._img);\n            }\n            this._img = null;\n            this._imgCustom = null;\n        };\n        DragDropTouch.prototype._moveImage = function (e) {\n            var _this = this;\n            requestAnimationFrame(function () {\n                if (_this._img != null) {\n                    var pt = _this._getPoint(e, true), s = _this._img.style;\n                    s.position = 'absolute';\n                    s.pointerEvents = 'none';\n                    s.zIndex = '999999';\n                    s.left = Math.round(pt.x - _this._imgOffset.x) + 'px';\n                    s.top = Math.round(pt.y - _this._imgOffset.y) + 'px';\n                }\n            });\n        };\n        DragDropTouch.prototype._copyProps = function (dst, src, props) {\n            for (var i = 0; i < props.length; i++) {\n                var p = props[i];\n                dst[p] = src[p];\n            }\n        };\n        DragDropTouch.prototype._copyStyle = function (src, dst) {\n            DragDropTouchSingleton._rmvAtts.forEach(function (att) {\n                dst.removeAttribute(att);\n            });\n            if (src instanceof HTMLCanvasElement) {\n                var cSrc = src, cDst = dst;\n                cDst.width = cSrc.width;\n                cDst.height = cSrc.height;\n                cDst.getContext('2d').drawImage(cSrc, 0, 0);\n            }\n            var cs = getComputedStyle(src); // poor trick to satisfy compiler\n            for (var i = 0; i < cs.length; i++) {\n                var key = cs[i];\n                if (key.indexOf('transition') < 0) {\n                    dst.style[key] = cs[key];\n                }\n            }\n            dst.style.pointerEvents = 'none';\n            for (var i = 0; i < src.children.length; i++) {\n                this._copyStyle(src.children[i], dst.children[i]);\n            }\n        };\n        DragDropTouch.prototype._dispatchEvent = function (e /* poor TypeScript trick */, type, target) {\n            if ((e != null) && (target != null)) {\n                var evt = document.createEvent('Event'); // poor trick to satisfy compiler\n                var t = (e['touches'] != null) ? e['touches'][0] : e;\n                evt.initEvent(type, true, true);\n                evt['button'] = 0;\n                evt['which'] = evt['buttons'] = 1;\n                this._copyProps(evt, e, DragDropTouchSingleton._kbdProps);\n                this._copyProps(evt, t, DragDropTouchSingleton._ptProps);\n                evt['dataTransfer'] = this._dataTransfer;\n                target.dispatchEvent(evt);\n                return evt.defaultPrevented;\n            }\n            return false;\n        };\n        DragDropTouch.prototype._closestDraggable = function (e) {\n            for (; e; e = e.parentElement) {\n                if (e.hasAttribute('draggable') && e.getAttribute('draggable')) {\n                    return e;\n                }\n            }\n            return null;\n        };\n        // @ts-ignore\n        var Singleton = new DragDropTouch();\n        Singleton._instance = Singleton;\n        return Singleton;\n    }());\n    DragDropTouchExport.DragDropTouch = DragDropTouchSingleton;\n    var Singleton = DragDropTouch.DragDropTouch;\n    Singleton._THRESHOLD = 5; // pixels to move before drag starts\n    Singleton._OPACITY = 0.5; // drag image opacity\n    Singleton._DBLCLICK = 500; // max ms between clicks in a double click\n    Singleton._CTXMENU = 900; // ms to hold before raising 'contextmenu' event\n    Singleton._ISPRESSHOLDMODE = false; // decides of press & hold mode presence\n    Singleton._PRESSHOLDAWAIT = 400; // ms to wait before press & hold is detected\n    Singleton._PRESSHOLDMARGIN = 25; // pixels that finger might shiver while pressing\n    Singleton._PRESSHOLDTHRESHOLD = 0; // pixels to move before drag starts\n    Singleton._rmvAtts = 'id,class,style,draggable'.split(',');\n    Singleton._kbdProps = 'altKey,ctrlKey,metaKey,shiftKey'.split(',');\n    Singleton._ptProps = 'pageX,pageY,clientX,clientY,screenX,screenY,offsetX,offsetY'.split(',');\n})(DragDropTouch || (DragDropTouch = {}));\nvar DragDropTouch$1 = DragDropTouch;\n\nexport default DragDropTouch$1;\n//# sourceMappingURL=DragDropTouch.esm.js.map\n","  import DragDropTouch from 'dragdroptouch-bug-fixed'\n  export default DragDropTouch.DragDropTouch"],"names":["DragDropTouch","DragDropTouchExport","DataTransfer","this","_dropEffect","_effectAllowed","_data","Object","defineProperty","prototype","enumerable","configurable","get","set","value","keys","clearData","type","toLowerCase","getData","setData","setDragImage","img","offsetX","offsetY","ddt","_instance","_imgCustom","_imgOffset","x","y","DragDropTouchSingleton","_lastClick","Error","supportsPassive","document","addEventListener","passive","navigator","maxTouchPoints","touchstart","_touchstart","bind","touchmove","_touchmove","touchend","_touchend","Options","capture","getInstance","e","_this","_shouldHandle","Date","now","_DBLCLICK","_dispatchEvent","target","preventDefault","_reset","src_1","_closestDraggable","_dragSource","_ptDown","_getPoint","_lastTouch","setTimeout","_img","_CTXMENU","_ISPRESSHOLDMODE","_pressHoldInterval","_isDragEnabled","_PRESSHOLDAWAIT","_shouldCancelPressHoldMove","_shouldHandleMove","_shouldHandlePressHoldMove","_getTarget","_shouldStartDragging","_createImage","_lastTarget","_moveImage","_isDropZone","_destroyImage","indexOf","defaultPrevented","touches","length","_getDelta","_PRESSHOLDMARGIN","delta","_THRESHOLD","_PRESSHOLDTHRESHOLD","_dataTransfer","clearInterval","page","Touch_1","pageX","clientX","pageY","clientY","Event_1","p","Math","abs","pt","el","elementFromPoint","getComputedStyle","pointerEvents","parentElement","src","cloneNode","_copyStyle","style","top","left","rc","getBoundingClientRect","opacity","_OPACITY","toString","body","appendChild","removeChild","requestAnimationFrame","s","position","zIndex","round","_copyProps","dst","props","i","_rmvAtts","forEach","att","removeAttribute","HTMLCanvasElement","cSrc","cDst","width","height","getContext","drawImage","cs","key","children","evt","createEvent","t","initEvent","_kbdProps","_ptProps","dispatchEvent","hasAttribute","getAttribute","Singleton","split"],"mappings":"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"}