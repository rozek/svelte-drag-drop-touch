{"version":3,"file":"svelte-drag-drop-touch.esm.js","sources":["../dragdroptouch-bug-fixed/DragDropTouch.esm.js","svelte-drag-drop-touch.ts"],"sourcesContent":["var DragDropTouch;\n(function (DragDropTouchExport) {\n    var DataTransfer = (function () {\n        function DataTransfer() {\n            this._dropEffect = 'move';\n            this._effectAllowed = 'all';\n            this._data = {};\n        }\n        Object.defineProperty(DataTransfer.prototype, \"dropEffect\", {\n            enumerable: true, configurable: true,\n            get: function () { return this._dropEffect; },\n            set: function (value) { this._dropEffect = value; },\n        });\n        Object.defineProperty(DataTransfer.prototype, \"effectAllowed\", {\n            enumerable: true, configurable: true,\n            get: function () { return this._effectAllowed; },\n            set: function (value) { this._effectAllowed = value; },\n        });\n        Object.defineProperty(DataTransfer.prototype, \"types\", {\n            enumerable: true, configurable: true,\n            get: function () { return Object.keys(this._data); },\n        });\n        DataTransfer.prototype.clearData = function (type) {\n            if (type == null) {\n                this._data = {};\n            }\n            else {\n                delete this._data[type.toLowerCase()];\n            }\n        };\n        DataTransfer.prototype.getData = function (type) {\n            return this._data[type.toLowerCase()] || '';\n        };\n        DataTransfer.prototype.setData = function (type, value) {\n            this._data[type.toLowerCase()] = value;\n        };\n        DataTransfer.prototype.setDragImage = function (img, offsetX, offsetY) {\n            var ddt = DragDropTouch._instance;\n            ddt._imgCustom = img;\n            ddt._imgOffset = { x: offsetX, y: offsetY };\n        };\n        return DataTransfer;\n    }());\n    DragDropTouchExport.DataTransfer = DataTransfer;\n    var DragDropTouchSingleton = (function () {\n        function DragDropTouch() {\n            this._lastClick = 0;\n            if ((DragDropTouchSingleton != null) &&\n                (DragDropTouchSingleton._instance != null)) {\n                throw new Error('DragDropTouch instance already created.');\n            }\n            // https://github.com/Modernizr/Modernizr/issues/1894\n            var supportsPassive = false;\n            document.addEventListener('test', function () { }, {\n                get passive() { supportsPassive = true; return true; }\n            });\n            if (navigator.maxTouchPoints > 0) {\n                var touchstart = this._touchstart.bind(this);\n                var touchmove = this._touchmove.bind(this);\n                var touchend = this._touchend.bind(this);\n                var Options = (supportsPassive ? { passive: false, capture: false } : false);\n                document.addEventListener('touchstart', touchstart, Options);\n                document.addEventListener('touchmove', touchmove, Options);\n                document.addEventListener('touchend', touchend);\n                document.addEventListener('touchcancel', touchend);\n            }\n        }\n        DragDropTouch.getInstance = function () {\n            return DragDropTouchSingleton._instance;\n        };\n        /**** Event Handlers ****/\n        DragDropTouch.prototype._touchstart = function (e) {\n            var _this = this;\n            if (this._shouldHandle(e)) {\n                if (Date.now() - this._lastClick < DragDropTouchSingleton._DBLCLICK) {\n                    if (this._dispatchEvent(e, 'dblclick', e.target)) {\n                        e.preventDefault();\n                        this._reset();\n                        return;\n                    }\n                }\n                this._reset();\n                var src_1 = this._closestDraggable(e.target);\n                if (src_1 != null) {\n                    if (!this._dispatchEvent(e, 'mousemove', e.target) &&\n                        !this._dispatchEvent(e, 'mousedown', e.target)) {\n                        this._dragSource = src_1;\n                        this._ptDown = this._getPoint(e);\n                        this._lastTouch = e;\n                        e.preventDefault();\n                        setTimeout(function () {\n                            if ((_this._dragSource === src_1) && (_this._img == null)) {\n                                if (_this._dispatchEvent(e, 'contextmenu', src_1)) {\n                                    _this._reset();\n                                }\n                            }\n                        }, DragDropTouchSingleton._CTXMENU);\n                        if (DragDropTouchSingleton._ISPRESSHOLDMODE) {\n                            this._pressHoldInterval = setTimeout(function () {\n                                _this._isDragEnabled = true;\n                                _this._touchmove(e);\n                            }, DragDropTouchSingleton._PRESSHOLDAWAIT);\n                        }\n                    }\n                }\n            }\n        };\n        DragDropTouch.prototype._touchmove = function (e) {\n            if (this._shouldCancelPressHoldMove(e)) {\n                this._reset();\n                return;\n            }\n            if (this._shouldHandleMove(e) || this._shouldHandlePressHoldMove(e)) {\n                var target = this._getTarget(e);\n                if (this._dispatchEvent(e, 'mousemove', target)) {\n                    this._lastTouch = e;\n                    e.preventDefault();\n                    return;\n                }\n                var lastPointOnPage = this._getPoint(this._lastTouch, true);\n                var curPointOnPage = this._getPoint(e, true);\n                this._lastMovementX = curPointOnPage.x - lastPointOnPage.x;\n                this._lastMovementY = curPointOnPage.y - lastPointOnPage.y;\n                var Extras = { movementX: this._lastMovementX, movementY: this._lastMovementY };\n                if (this._dragSource && (this._img == null) && this._shouldStartDragging(e)) {\n                    this._dispatchEvent(e, 'dragstart', this._dragSource, Extras);\n                    this._createImage(e);\n                    this._dispatchEvent(e, 'dragenter', target, Extras);\n                }\n                if (this._img != null) {\n                    this._lastTouch = e;\n                    e.preventDefault();\n                    this._dispatchEvent(e, 'drag', this._dragSource, Extras);\n                    if (target != this._lastTarget) {\n                        this._dispatchEvent(this._lastTouch, 'dragleave', this._lastTarget, Extras);\n                        this._dispatchEvent(e, 'dragenter', target, Extras);\n                        this._lastTarget = target;\n                    }\n                    this._moveImage(e);\n                    this._isDropZone = this._dispatchEvent(e, 'dragover', target, Extras);\n                }\n            }\n        };\n        DragDropTouch.prototype._touchend = function (e) {\n            if (this._shouldHandle(e)) {\n                if (this._dispatchEvent(this._lastTouch, 'mouseup', e.target)) {\n                    e.preventDefault();\n                    return;\n                }\n                if (this._img == null) {\n                    this._dragSource = null;\n                    this._dispatchEvent(this._lastTouch, 'click', e.target);\n                    this._lastClick = Date.now();\n                }\n                this._destroyImage();\n                if (this._dragSource) {\n                    var Extras = { movementX: this._lastMovementX, movementY: this._lastMovementY };\n                    if (e.type.indexOf('cancel') < 0 && this._isDropZone) {\n                        this._dispatchEvent(this._lastTouch, 'drop', this._lastTarget, Extras);\n                    }\n                    this._dispatchEvent(this._lastTouch, 'dragend', this._dragSource, Extras);\n                    this._reset();\n                }\n            }\n        };\n        /**** Utility Functions ****/\n        DragDropTouch.prototype._shouldHandle = function (e) {\n            return ((e != null) && !e.defaultPrevented &&\n                (e.touches != null) && (e.touches.length < 2));\n        };\n        DragDropTouch.prototype._shouldHandleMove = function (e) {\n            return !DragDropTouchSingleton._ISPRESSHOLDMODE && this._shouldHandle(e);\n        };\n        DragDropTouch.prototype._shouldHandlePressHoldMove = function (e) {\n            return (DragDropTouchSingleton._ISPRESSHOLDMODE && this._isDragEnabled &&\n                (e != null) && (e.touches != null) && (e.touches.length > 0));\n        };\n        DragDropTouch.prototype._shouldCancelPressHoldMove = function (e) {\n            return (DragDropTouchSingleton._ISPRESSHOLDMODE && !this._isDragEnabled &&\n                (this._getDelta(e) > DragDropTouchSingleton._PRESSHOLDMARGIN));\n        };\n        DragDropTouch.prototype._shouldStartDragging = function (e) {\n            var delta = this._getDelta(e);\n            return ((delta > DragDropTouchSingleton._THRESHOLD) ||\n                DragDropTouchSingleton._ISPRESSHOLDMODE && (delta >= DragDropTouchSingleton._PRESSHOLDTHRESHOLD));\n        };\n        DragDropTouch.prototype._reset = function () {\n            this._destroyImage();\n            this._dragSource = null;\n            this._lastTouch = null;\n            this._lastTarget = null;\n            this._ptDown = null;\n            this._isDragEnabled = false;\n            this._isDropZone = false;\n            this._dataTransfer = new DataTransfer();\n            this._lastMovementX = 0;\n            this._lastMovementY = 0;\n            clearInterval(this._pressHoldInterval);\n        };\n        DragDropTouch.prototype._getPoint = function (e, page) {\n            if ((e != null) && (e.touches != null) &&\n                (e.touches.length > 0)) {\n                var Touch_1 = e.touches[0];\n                return { x: page ? Touch_1.pageX : Touch_1.clientX, y: page ? Touch_1.pageY : Touch_1.clientY };\n            }\n            else {\n                var Event_1 = e;\n                return { x: page ? Event_1.pageX : Event_1.clientX, y: page ? Event_1.pageY : Event_1.clientY };\n            }\n        };\n        DragDropTouch.prototype._getDelta = function (e) {\n            if (DragDropTouchSingleton._ISPRESSHOLDMODE && !this._ptDown) {\n                return 0;\n            }\n            var p = this._getPoint(e);\n            return Math.abs(p.x - this._ptDown.x) + Math.abs(p.y - this._ptDown.y);\n        };\n        DragDropTouch.prototype._getTarget = function (e) {\n            var pt = this._getPoint(e);\n            var el = document.elementFromPoint(pt.x, pt.y);\n            while ((el != null) && (getComputedStyle(el).pointerEvents == 'none')) {\n                el = el.parentElement;\n            }\n            return el;\n        };\n        DragDropTouch.prototype._createImage = function (e) {\n            if (this._img != null) {\n                this._destroyImage();\n            }\n            var src = this._imgCustom || this._dragSource;\n            this._img = src.cloneNode(true);\n            this._copyStyle(src, this._img);\n            this._img.style.top = this._img.style.left = '-9999px';\n            if (this._imgCustom == null) {\n                var rc = src.getBoundingClientRect();\n                var pt = this._getPoint(e);\n                this._imgOffset = { x: pt.x - rc.left, y: pt.y - rc.top };\n                this._img.style.opacity = DragDropTouchSingleton._OPACITY.toString();\n            }\n            this._moveImage(e);\n            document.body.appendChild(this._img);\n        };\n        DragDropTouch.prototype._destroyImage = function () {\n            if ((this._img != null) && (this._img.parentElement != null)) {\n                this._img.parentElement.removeChild(this._img);\n            }\n            this._img = null;\n            this._imgCustom = null;\n        };\n        DragDropTouch.prototype._moveImage = function (e) {\n            var _this = this;\n            requestAnimationFrame(function () {\n                if (_this._img != null) {\n                    var pt = _this._getPoint(e, true), s = _this._img.style;\n                    s.position = 'absolute';\n                    s.pointerEvents = 'none';\n                    s.zIndex = '999999';\n                    s.left = Math.round(pt.x - _this._imgOffset.x) + 'px';\n                    s.top = Math.round(pt.y - _this._imgOffset.y) + 'px';\n                }\n            });\n        };\n        DragDropTouch.prototype._copyProps = function (dst, src, props) {\n            for (var i = 0; i < props.length; i++) {\n                var p = props[i];\n                dst[p] = src[p];\n            }\n        };\n        DragDropTouch.prototype._copyStyle = function (src, dst) {\n            DragDropTouchSingleton._rmvAtts.forEach(function (att) {\n                dst.removeAttribute(att);\n            });\n            if (src instanceof HTMLCanvasElement) {\n                var cSrc = src, cDst = dst;\n                cDst.width = cSrc.width;\n                cDst.height = cSrc.height;\n                cDst.getContext('2d').drawImage(cSrc, 0, 0);\n            }\n            var cs = getComputedStyle(src); // poor trick to satisfy compiler\n            for (var i = 0; i < cs.length; i++) {\n                var key = cs[i];\n                if (key.indexOf('transition') < 0) {\n                    dst.style[key] = cs[key];\n                }\n            }\n            dst.style.pointerEvents = 'none';\n            for (var i = 0; i < src.children.length; i++) {\n                this._copyStyle(src.children[i], dst.children[i]);\n            }\n        };\n        DragDropTouch.prototype._dispatchEvent = function (e /* poor TypeScript trick */, type, target, Extras) {\n            if ((e != null) && (target != null)) {\n                var evt = document.createEvent('Event'); // poor trick to satisfy compiler\n                var t = (e['touches'] != null) ? e['touches'][0] : e;\n                evt.initEvent(type, true, true);\n                evt['button'] = 0;\n                evt['which'] = evt['buttons'] = 1;\n                this._copyProps(evt, e, DragDropTouchSingleton._kbdProps);\n                this._copyProps(evt, t, DragDropTouchSingleton._ptProps);\n                evt['dataTransfer'] = this._dataTransfer;\n                if (Extras != null) {\n                    evt['movementX'] = Extras.movementX;\n                    evt['movementY'] = Extras.movementY;\n                }\n                target.dispatchEvent(evt);\n                return evt.defaultPrevented;\n            }\n            return false;\n        };\n        DragDropTouch.prototype._closestDraggable = function (e) {\n            for (; e; e = e.parentElement) {\n                if (e.hasAttribute('draggable') && e.getAttribute('draggable')) {\n                    return e;\n                }\n            }\n            return null;\n        };\n        // @ts-ignore\n        var Singleton = new DragDropTouch();\n        Singleton._instance = Singleton;\n        return Singleton;\n    }());\n    DragDropTouchExport.DragDropTouch = DragDropTouchSingleton;\n    var Singleton = DragDropTouch.DragDropTouch;\n    Singleton._THRESHOLD = 5; // pixels to move before drag starts\n    Singleton._OPACITY = 0.5; // drag image opacity\n    Singleton._DBLCLICK = 500; // max ms between clicks in a double click\n    Singleton._CTXMENU = 900; // ms to hold before raising 'contextmenu' event\n    Singleton._ISPRESSHOLDMODE = false; // decides of press & hold mode presence\n    Singleton._PRESSHOLDAWAIT = 400; // ms to wait before press & hold is detected\n    Singleton._PRESSHOLDMARGIN = 25; // pixels that finger might shiver while pressing\n    Singleton._PRESSHOLDTHRESHOLD = 0; // pixels to move before drag starts\n    Singleton._rmvAtts = 'id,class,style,draggable'.split(',');\n    Singleton._kbdProps = 'altKey,ctrlKey,metaKey,shiftKey'.split(',');\n    Singleton._ptProps = 'pageX,pageY,clientX,clientY,screenX,screenY,offsetX,offsetY'.split(',');\n})(DragDropTouch || (DragDropTouch = {}));\nvar DragDropTouch$1 = DragDropTouch;\n\nexport default DragDropTouch$1;\n//# sourceMappingURL=DragDropTouch.esm.js.map\n","  import DragDropTouch from 'dragdroptouch-bug-fixed'\n  export default DragDropTouch.DragDropTouch"],"names":["DragDropTouch","DragDropTouchExport","DataTransfer","this","_dropEffect","_effectAllowed","_data","Object","defineProperty","prototype","enumerable","configurable","get","set","value","keys","clearData","type","toLowerCase","getData","setData","setDragImage","img","offsetX","offsetY","ddt","_instance","_imgCustom","_imgOffset","x","y","DragDropTouchSingleton","_lastClick","Error","supportsPassive","document","addEventListener","passive","navigator","maxTouchPoints","touchstart","_touchstart","bind","touchmove","_touchmove","touchend","_touchend","Options","capture","getInstance","e","_this","_shouldHandle","Date","now","_DBLCLICK","_dispatchEvent","target","preventDefault","_reset","src_1","_closestDraggable","_dragSource","_ptDown","_getPoint","_lastTouch","setTimeout","_img","_CTXMENU","_ISPRESSHOLDMODE","_pressHoldInterval","_isDragEnabled","_PRESSHOLDAWAIT","_shouldCancelPressHoldMove","_shouldHandleMove","_shouldHandlePressHoldMove","_getTarget","lastPointOnPage","curPointOnPage","_lastMovementX","_lastMovementY","Extras","movementX","movementY","_shouldStartDragging","_createImage","_lastTarget","_moveImage","_isDropZone","_destroyImage","indexOf","defaultPrevented","touches","length","_getDelta","_PRESSHOLDMARGIN","delta","_THRESHOLD","_PRESSHOLDTHRESHOLD","_dataTransfer","clearInterval","page","Touch_1","pageX","clientX","pageY","clientY","Event_1","p","Math","abs","pt","el","elementFromPoint","getComputedStyle","pointerEvents","parentElement","src","cloneNode","_copyStyle","style","top","left","rc","getBoundingClientRect","opacity","_OPACITY","toString","body","appendChild","removeChild","requestAnimationFrame","s","position","zIndex","round","_copyProps","dst","props","i","_rmvAtts","forEach","att","removeAttribute","HTMLCanvasElement","cSrc","cDst","width","height","getContext","drawImage","cs","key","children","evt","createEvent","t","initEvent","_kbdProps","_ptProps","dispatchEvent","hasAttribute","getAttribute","Singleton","split"],"mappings":"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"}